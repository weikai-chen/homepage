#+CREATOR: Emacs 26.3 (Org mode 9.1.9 + ox-hugo)
#+HUGO_SECTION: en/post
#+HUGO_BASE_DIR:~/academic-homepage
#+hugo_weight: auto

* Emacs                                                              :@emacs:
All posts in here will have the category set to /emacs/.
** Writing Posts in Org using Ox-Hugo                                      :hugo:org:tools:Emacs:
:PROPERTIES:
:EXPORT_HUGO_SECTION: en/post/emacs-ox-hugo
:EXPORT_FILE_NAME: index
:EXPORT_DATE: 2019-10-13
:EXPORT_HUGO_CUSTOM_FRONT_MATTER: :summary Writing hugo post in Emacs org.
:END:

I use  [[https://www.gnu.org/software/emacs/emacs.html][Emacs]] for almost everything I do with my laptop, such as note-taking, GTD, email-checking, coding
and writing. In previous posts, I introduced some packages and my workflow in Emacs for $\LaTeX$,
bibolography management and some usages Emacs as an alternative to Rstudio. In this post,
I will show how to write posts in my website in org with Hugo.

*** Hugo and ox-hugo
This website is built using [[https://gohugo.io/][Hugo]] with the [[https://themes.gohugo.io/academic/][Academic Theme]]. I use [[https://ox-hugo.scripter.co/][ox-hugo]], a org exporter backend that exports Org to Hugo-compatible Markdown. To use ox-hugo,
I add the following lines in the my configuration [fn:: In my case =init-local.el=, as I use the configuration by [[https://github.com/purcell/emacs.d][Purcell]].].

#+BEGIN_SRC emacs-lisp
;; webpage
(require-package 'ox-hugo)
(with-eval-after-load 'ox

  (require 'ox-hugo))
#+END_SRC

Create a org file in the directory, then I can write all my posts in org.

#+caption: Writing Hugo Post in Emacs Org with ox-hugo
[[/images/hugo-screenshot.png]]

*** Directory and Section
 At the beginning of the file, specify the directory and section, it will export the markdown file to =HUGO_BASE_DIR/content/HUGO_SECTION/=.
#+BEGIN_SRC
#+HUGO_SECTION: en/post
#+HUGO_BASE_DIR:~/academic-homepage
#+hugo_weight: auto
#+END_SRC
For example, with the above setting, this post will be exported in  =~/academic-homepage/content/en/post/=.
*** Enable Auto Export
At the end of the file, add the following to enable auto-export. Then every time you save the org file, ox-hugo will automatically
export the files.

#+BEGIN_SRC
# Local Variables:
# eval: (org-hugo-auto-export-mode)
# End:
#+END_SRC

*** Exporting Properties for each Post

The heading would become the title of the post.  Use =C-c C-q= the set the tags, which would become the tags for the post.
A *TODO* heading will make the post as a draft.

Add the following properties to specify the file name, date of exportation, and hugo customized front matter, e.g., summary.
#+BEGIN_SRC
:PROPERTIES:
:EXPORT_HUGO_SECTION: en/post/emacs-ox-hugo
:EXPORT_FILE_NAME: index
:EXPORT_DATE: 2019-10-13
:EXPORT_HUGO_CUSTOM_FRONT_MATTER: :summary Writing hugo post in Emacs org.
:END:
#+END_SRC
Note that I put each post in a folder within the directory =post=.
** SageMath in Emacs                                                            :Emacs:SageMath:tools:org:
:PROPERTIES:
:EXPORT_HUGO_SECTION: en/post/emacs-sagemath
:EXPORT_FILE_NAME: index
:EXPORT_DATE: 2019-11-26
:EXPORT_HUGO_CUSTOM_FRONT_MATTER: :summary Using SageMath in Emacs.
:END:
I use  [[https://www.gnu.org/software/emacs/emacs.html][Emacs]] for almost everything I do with my laptop, such as note-taking, GTD, email-checking, coding
and writing. In previous posts, I introduced some packages and my workflow in Emacs for $\LaTeX$,
bibolography management, the use of  Emacs as an alternative to Rstudio, and writing posts in org with Hugo.
In this post, I will introduce the use of [[http://www.sagemath.org/][SageMath]] in Emacs.

*** SageMath
  [[http://www.sagemath.org/][SageMath]] a free open-source mathematics software system based on
 Python.  As claimed in the website, the aim is to create "a viable
 free open source alternative to Magma, Maple, Mathematica and Matlab."
 For example, you can do symbolic maths and ask Sage to produce the $\LaTeX$ code.

 #+BEGIN_SRC sage :result value :exports both
 var('alpha,x,y')
 f = x^alpha*y^(1-alpha)
 f.differentiate(x)
 latex(f.differentiate(x))
#+END_SRC

#+RESULTS:
: (alpha, x, y)
: alpha*x^(alpha - 1)*y^(-alpha + 1)
: \alpha x^{\alpha - 1} y^{-\alpha + 1}

It is easy to plot a function, or find a root of a function numerically.
#+BEGIN_SRC sage :file sin.png :exports both
P = plot(sin(x), (0, 2*pi), figsize=[5, 4]); P
#+END_SRC

#+RESULTS:
[[file:sin.png]]

#+BEGIN_SRC sage :exports both
g = sin(x) + (1- x^2)
find_root(g, 0, 2)
#+END_SRC

#+RESULTS:
: 1.4096240040025754

*** SageMath in Emacs
I use =sage-shell-mode= and =ob-sagemath= in Emacs with the following configuration.
#+BEGIN_SRC emacs-lisp
;; sagemath
(require 'sage-shell-mode)
(sage-shell:define-alias)
;;Ob-sagemath supports only evaluating with a session.
(setq org-babel-default-header-args:sage '((:session . t)
                                           (:results . "output")))

;; C-c c for asynchronous evaluating (only for SageMath code blocks).
(with-eval-after-load "org"
  (define-key org-mode-map (kbd "C-c c") 'ob-sagemath-execute-async))

;; Do not confirm before evaluation
(setq org-confirm-babel-evaluate nil)

;; Do not evaluate code blocks when exporting.
(setq org-export-babel-evaluate nil)

;; Show images when opening a file.
(setq org-startup-with-inline-images t)

;; Show images after evaluating code blocks.
(add-hook 'org-babel-after-execute-hook 'org-display-inline-images)
#+END_SRC

#+caption: Sage shell in Emacs using sage-shell-mode
[[file:screen-sage-shell.png]]

#+caption: Script blocks using ob-sagemath
[[file:screen-sage-blocks.png]]


* COMMENT Local Variables :ARCHIVE: # Local Variables: #
eval: (org-hugo-auto-export-mode) # End:
